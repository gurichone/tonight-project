{% extends "teacher/base.html" %}

{% block title %}時間割表{% endblock %}
{% block modorulink %}<a href="{{ url_for('teacher.menu.t_menu') }}">戻る</a>{% endblock %}
{% block content %}
<h1>時間割表</h1>

<!-- 年と月の選択 -->
<form action="{{ url_for('teacher.jikanwari.t_jikanwari') }}" method="get">
    <label for="year-select">年</label>
    <select name="year" id="year-select">
        <option value="2024" {% if selected_year == 2024 %}selected{% endif %}>2024</option>
        <option value="2025" {% if selected_year == 2025 %}selected{% endif %}>2025</option>
        <!-- 必要に応じて追加 -->
    </select>

    <label for="month-select">月</label>
    <select name="month" id="month-select">
        <option value="" {% if not selected_month %}selected{% endif %}>選択してください</option>
        <option value="1" {% if selected_month == 1 %}selected{% endif %}>1月</option>
        <option value="2" {% if selected_month == 2 %}selected{% endif %}>2月</option>
        <option value="3" {% if selected_month == 3 %}selected{% endif %}>3月</option>
        <option value="4" {% if selected_month == 4 %}selected{% endif %}>4月</option>
        <option value="5" {% if selected_month == 5 %}selected{% endif %}>5月</option>
        <option value="6" {% if selected_month == 6 %}selected{% endif %}>6月</option>
        <option value="7" {% if selected_month == 7 %}selected{% endif %}>7月</option>
        <option value="8" {% if selected_month == 8 %}selected{% endif %}>8月</option>
        <option value="9" {% if selected_month == 9 %}selected{% endif %}>9月</option>
        <option value="10" {% if selected_month == 10 %}selected{% endif %}>10月</option>
        <option value="11" {% if selected_month == 11 %}selected{% endif %}>11月</option>
        <option value="12" {% if selected_month == 12 %}selected{% endif %}>12月</option>
    </select>

    <button type="submit">更新</button>
</form>

<!-- カレンダー表示 -->
{% if selected_year and selected_month %}
    <table class="jikanwari-table">
        <thead>
            <tr class="jikanwari-tr">
                <th class="jikanwari-th">日</th>
                <th class="jikanwari-th">曜日</th>
                <th class="jikanwari-th">1時間目</th>
                <th class="jikanwari-th">2時間目</th>
                <th class="jikanwari-th">3時間目</th>
                <th class="jikanwari-th">備考</th>
                <th class="jikanwari-th">イベント</th>
            </tr>
        </thead>
        <tbody>
            {% for date in dates_and_weekdays %}
            <tr class="jikanwari-tr">
                <td class="jikanwari-td">{{ date.day }}</td>
                <td class="jikanwari-td">{{ date.weekday }}</td>
                <td class="jikanwari-td">{{ date.lesson1 }}</td>  <!-- 1時間目 -->
                <td class="jikanwari-td">{{ date.lesson2 }}</td>  <!-- 2時間目 -->
                <td class="jikanwari-td">{{ date.lesson3 }}</td>  <!-- 3時間目 -->
                <td class="jikanwari-td">{{ date.notes }}</td>    <!-- 備考 -->
                <td class="jikanwari-td">{{ date.event }}</td>    <!-- イベント -->
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

{% endblock %}
