{% extends "teacher/base.html" %}
{% block title %}アカウント情報{% endblock %}
{% block modorulink %}<a href="{{ url_for('teacher.menu.t_menu') }}">戻る</a>{% endblock %}
{% block content %}

<!-- auth/views.pyのlogout関数を実行 -->
<a href="{{ url_for('auth.logout') }}" class="nav-link">ログアウト</a>

<h2>アカウント情報</h2>

<div class="profile-container">
    <div class="profile-image">
        <!-- 画像の変更がわかるflashメッセージを表示 -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flashes">
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}    
    <!-- ユーザーがアイコンを設定してない場合はデフォルトアイコンを表示 -->
    <img src="{{ url_for('teacher.profile.upload_file', filename=teacher.icon_path.split('uploads/icon/')[1] if teacher.icon_path else 'icon/default/default_icon.png') }}" alt="プロフィール画像">
    <button onclick="window.location.href='{{ url_for('teacher.profile.edit_profile_image') }}'">画像を編集</button>
    </div>
    <table>
        <tr>
            <th>教員番号</th>
            <td>{{ teacher.id }}</td>
        </tr>
        <tr>
            <th>クラス番号</th>
            <td>{{ teacher.class_num }}</td>
        </tr>
        <tr>
            <th>氏名</th>
            <td>{{ teacher.teacher_name }}</td>
        </tr>
        <tr>
            <th>メールアドレス</th>
            <td>{{ teacher.teacher_email }}</td>
        </tr>
        <tr>
            <th>パスワード</th>
            <td>********</td>
            <td><a href="{{ url_for('teacher.profile.reset_password') }}">変更</a></td>
        </tr>
    </table>
</div>
{% endblock %}
